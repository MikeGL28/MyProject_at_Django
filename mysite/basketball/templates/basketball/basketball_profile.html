{% extends "base.html" %}
{% block title %}–ë–∞—Å–∫–µ—Ç–±–æ–ª üèÄ{% endblock %}

{% block body %}
<h1>–ë–∞—Å–∫–µ—Ç–±–æ–ª üèÄ</h1>

<div class="about-section d-flex flex-wrap align-items-center">
  <!-- –õ–µ–≤–∞—è —á–∞—Å—Ç—å: —Ç–µ–∫—Å—Ç -->
  <div class="about-text col-md-6 col-12">
    <p>
      –ë–∞—Å–∫–µ—Ç–±–æ–ª –¥–ª—è –º–µ–Ω—è ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ —Å–ø–æ—Ä—Ç, –∞ —Å–ø–æ—Å–æ–± –±—ã—Ç—å –≤ —Ç–æ–Ω—É—Å–µ –∏ —Ä–∞–∑–≤–∏–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥–Ω–æ–µ –º—ã—à–ª–µ–Ω–∏–µ.
      –ò–≥—Ä–∞—é —É–∂–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ª–µ—Ç, —É—á–∞—Å—Ç–≤—É—é –≤ –º–µ—Å—Ç–Ω—ã—Ö —Ç—É—Ä–Ω–∏—Ä–∞—Ö –∏ —Å—Ç–∞—Ä–∞—é—Å—å —Ä–∞—Å—Ç–∏ –∫–∞–∫ –∏–≥—Ä–æ–∫.
    </p>
    <p>
      –ú–Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è —á—É–≤—Å—Ç–≤–æ –∫–æ–º–∞–Ω–¥—ã, –∫–æ–≥–¥–∞ –∫–∞–∂–¥—ã–π –∑–Ω–∞–µ—Ç —Å–≤–æ—é —Ä–æ–ª—å, –∏ –≤–º–µ—Å—Ç–µ –º—ã –≤—ã–∏–≥—Ä—ã–≤–∞–µ–º.
      –°–µ–π—á–∞—Å —è –∏–≥—Ä–∞—é –∫–∞–∫ –∑–∞—â–∏—Ç–Ω–∏–∫, —Ä–∞–±–æ—Ç–∞—é –Ω–∞–¥ –±—Ä–æ—Å–∫–∞–º–∏ –∏ —Å–∫–æ—Ä–æ—Å—Ç—å—é —Ä–µ–∞–∫—Ü–∏–∏.
    </p>
  </div>

  <!-- –ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å: —Ñ–æ—Ç–æ -->
  <div class="photo-container col-md-6 col-12 d-flex justify-content-center">
    <img src="/media/hobbies/photo_5258289733228950693_y.jpg" alt="–ú–æ—ë —Ñ–æ—Ç–æ –Ω–∞ –±–∞—Å–∫–µ—Ç–±–æ–ª—å–Ω–æ–π –ø–ª–æ—â–∞–¥–∫–µ">
  </div>
</div>

<!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä–æ–∫–æ–≤ -->
<h2 class="mt-5">–ù–∞—à–∏ –∏–≥—Ä–æ–∫–∏ üèÜ</h2>
<table class="table table-striped table-hover">
  <thead class="table-dark">
    <tr>
      <th>–§–ò–û</th>
      <th>–ü–æ–∑–∏—Ü–∏—è</th>
      <th>2-–æ—á–∫–∏</th>
      <th>3-–æ—á–∫–∏</th>
      <th>–û–±—â–∏–µ –æ—á–∫–∏</th>
      <th>–°—Ä–µ–¥–Ω–∏–µ –æ—á–∫–∏</th>
    </tr>
  </thead>
  <tbody>
    {% for player in players %}
      <tr>
        <td>{{ player.full_name }}</td>
        <td>{{ player.position }}</td>
        <td>{{ player.two_pointers }}</td>
        <td>{{ player.three_pointers }}</td>
        <td>{{ player.total_points }}</td>
        <td>{{ player.avg_points|floatformat:2 }}</td>
      </tr>
    {% empty %}
      <tr><td colspan="6">–ü–æ–∫–∞ –Ω–µ—Ç –∏–≥—Ä–æ–∫–æ–≤.</td></tr>
    {% endfor %}
  </tbody>
</table>
<div class="row row-cols-1 row-cols-md-5 g-4 mt-2">
  {% for player in players %}
    <div class="col">
      <div class="card h-100 shadow-sm" style="height: 500px; position: relative;">
        <!-- –§–æ—Ç–æ –∏–≥—Ä–æ–∫–∞ -->
        <img src="{{ player.photo.url }}" class="card-img-top" alt="{{ player.full_name }}" style="height: 500px; object-fit: cover;">

        <!-- –¢–µ–∫—Å—Ç–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø–æ–≤–µ—Ä—Ö —Ñ–æ—Ç–æ -->
        <div class="card-img-overlay d-flex flex-column justify-content-end" style="background: linear-gradient(to top, rgba(255, 255, 255, 0.3) 30%, transparent);">
          <div style="background-color: rgba(255, 255, 255, 0.65); padding: 1rem; border-radius: 6px;">
            <h5 class="card-title">{{ player.full_name }}</h5>
            <p class="card-text"><strong>–ü–æ–∑–∏—Ü–∏—è:</strong> {{ player.position|default:"‚Äî" }}</p>
            <p class="card-text"><strong>–†–æ—Å—Ç:</strong> {{ player.height|default:"‚Äî" }} —Å–º</p>
            <p class="card-text"><strong>–í–µ—Å:</strong> {{ player.weight|default:"‚Äî" }} –∫–≥</p>
            <p class="card-text"><strong>–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:</strong> {{ player.avg_points|floatformat:2 }}</p>
          </div>
        </div>
      </div>
    </div>
  {% empty %}
    <p>–ù–µ—Ç –∏–≥—Ä–æ–∫–æ–≤ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è.</p>
  {% endfor %}
</div>

<!-- –¢–∞–±–ª–∏—Ü–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ / –∏–≥—Ä -->
<h2 class="mt-5">–ú–æ–∏ –∏–≥—Ä—ã –∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ üèÄ</h2>
<table class="table table-bordered table-hover">
  <thead class="table-success">
    <tr>
      <th>–î–∞—Ç–∞</th>
      <th>2-–æ—á–∫–æ–≤—ã–µ</th>
      <th>3-–æ—á–∫–æ–≤—ã–µ</th>
      <th>–í—Å–µ–≥–æ –æ—á–∫–æ–≤</th>
    </tr>
  </thead>
  <tbody>
    {% if games %}
      {% for game in games %}
        <tr>
          <td>{{ game.date }}</td>
          <td>{{ game.two_pointers }}</td>
          <td>{{ game.three_pointers }}</td>
          <td>{{ game.total_points }}</td>
        </tr>
      {% endfor %}
      <tr class="table-info">
        <td colspan="3" class="text-end"><strong>–°—Ä–µ–¥–Ω–µ–µ –ø–æ –≤—Å–µ–º –∏–≥—Ä–∞–º:</strong></td>
        <td><strong>{{ avg_points }}</strong></td>
      </tr>
    {% else %}
      <tr>
        <td colspan="4" class="text-center">–ù–µ—Ç –∑–∞–ø–∏—Å–µ–π –æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞—Ö</td>
      </tr>
    {% endif %}
  </tbody>
</table>

<!-- –ö–∞–ª–µ–Ω–¥–∞—Ä—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ -->
<h2 class="mt-5">–ö–∞–ª–µ–Ω–¥–∞—Ä—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ üìÖ</h2>
<div class="calendar">
  <div class="calendar-header">
    {{ month_name|title }} {{ now.year }}
  </div>
  <div class="calendar-grid">
    {% for day in calendar %}
      <div class="day-cell level-{{ day.level }}" title="{{ day.day }} {{ month_name }}: {{ day.level }}">
        {{ day.day }}
      </div>
    {% endfor %}
  </div>
  <div class="calendar-legend mt-3">
    <span class="legend-item level-0">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö</span>
    <span class="legend-item level-1">–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</span>
  </div>
</div>

<!-- –°—Å—ã–ª–∫–∏ –Ω–∞ –¥–µ–π—Å—Ç–≤–∏—è -->
<div class="actions mt-4">
  <a href="{% url 'basketball:add_basketball_game' %}" class="btn btn-primary">–î–æ–±–∞–≤–∏—Ç—å –∏–≥—Ä—É</a>
  <a href="{% url 'basketball:add_player' %}" class="btn btn-success">–î–æ–±–∞–≤–∏—Ç—å –∏–≥—Ä–æ–∫–∞</a>
</div>

<style>
body {
  font-family: Arial, sans-serif;
  background-color: #f8f9fa;
  background-image: url('/static/css/basketbol-naa-spinka.jpg');
  background-size: cover;
  background-position: 80% center;
  background-repeat: no-repeat;
  background-attachment: fixed;
  margin: 0;
  padding: 0;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

.photo-container {
  flex: 1 1 300px;
  display: flex;
  justify-content: center;
}
.photo-container img {
  max-width: 50%;
  border-radius: 8px;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
}

.calendar {
  margin-top: 20px;
}
.calendar-header {
  font-weight: bold;
  text-align: left;
  margin-bottom: 10px;
  color: #333;
}
.calendar-grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 6px;
  max-width: 500px;
}
.day-cell {
  width: 30px;
  height: 30px;
  background-color: #ebedf0;
  border-radius: 4px;
  font-size: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: transform 0.2s ease;
}
.day-cell:hover {
  transform: scale(1.1);
}
/* –£—Ä–æ–≤–Ω–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ */
.day-cell.level-0 { background-color: #ebedf0; }
.day-cell.level-1 { background-color: #c6e48b; }
.day-cell.level-2 { background-color: #7bc96f; }
.day-cell.level-3 { background-color: #28a745; }
.day-cell.level-4 { background-color: #21863a; }

.calendar-legend {
  display: flex;
  gap: 10px;
  font-size: 0.9rem;
}
.legend-item.level-0::before,
.legend-item.level-1::before,
.legend-item.level-2::before,
.legend-item.level-3::before,
.legend-item.level-4::before {
  content: "";
  display: inline-block;
  width: 16px;
  height: 16px;
  margin-right: 4px;
  border-radius: 4px;
}
.legend-item.level-0::before { background-color: #ebedf0; }
.legend-item.level-1::before { background-color: #c6e48b; }
.legend-item.level-2::before { background-color: #7bc96f; }
.legend-item.level-3::before { background-color: #28a745; }
.legend-item.level-4::before { background-color: #21863a; }
</style>

{% endblock %}